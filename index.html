<!DOCTYPE html>
<html>
<head>
    <title>Travel Itinerary Generator</title>
    <!-- Keep the same CSS styles -->
</head>
<body>
    <div class="container">
        <h1>Travel AI Planner</h1>
        <textarea id="prompt" rows="4" placeholder="Enter your travel preferences..."></textarea>
        <button id="generateBtn">Generate Itinerary</button>
        <div id="output">Loading model... (This may take 30 seconds first time)</div>
    </div>

<script type="module">
    import { pipeline } from 'https://cdn.jsdelivr.net/npm/@xenova/transformers@2.17.2/dist/transformers.min.js';

    let generator;
    
    // Initialize model on page load
    async function initializeModel() {
        try {
            generator = await pipeline('text-generation', 'Xenova/distilgpt2');
            document.getElementById('output').textContent = 'Model ready! Enter your request above.';
            // Enable button after model loads
            document.getElementById('generateBtn').disabled = false;
        } catch (error) {
            document.getElementById('output').textContent = `Error: ${error.message}`;
        }
    }

    // Generate itinerary function
    async function generateItinerary() {
        const prompt = document.getElementById('prompt').value;
        if (!prompt) {
            alert('Please enter a travel request');
            return;
        }

        try {
            document.getElementById('output').textContent = 'Generating...';
            const output = await generator(prompt, {
                max_new_tokens: 500,
                temperature: 0.7
            });
            document.getElementById('output').textContent = output[0].generated_text;
        } catch (error) {
            document.getElementById('output').textContent = `Error: ${error.message}`;
        }
    }

    // Initialize model and set up event listener
    document.addEventListener('DOMContentLoaded', () => {
        initializeModel();
        // Add event listener properly
        document.getElementById('generateBtn').addEventListener('click', generateItinerary);
    });
</script>
</body>
</html>
